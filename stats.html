<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="shortcut icon"
      href="https://colegiorealengo.br/novo-portal/assets/images/icons/online_course.png"
      type="image/x-icon"
    />
    <title>CEDESP - Estat√≠sticas Administrativas</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="container stats-container">
      <header>
        <div class="header-content">
          <h1>üìä Estat√≠sticas Administrativas</h1>
          <p class="subtitle">Dashboard completo do sistema CEDESP</p>
        </div>
        <button id="backToMain" class="back-btn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            viewBox="0 0 16 16"
          >
            <path
              fill-rule="evenodd"
              d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"
            />
          </svg>
          Voltar ao Sistema
        </button>
      </header>

      <!-- Cards de Resumo -->
      <section class="stats-summary">
        <div class="stats-grid" style="gap: 1rem">
          <div
            class="stat-card"
            style="min-width: 140px; max-width: 160px; padding: 0.7rem 1rem"
          >
            <div class="stat-icon" style="font-size: 1.7rem">üë•</div>
            <div class="stat-content">
              <h3 id="totalStudents" style="font-size: 1.5rem">0</h3>
              <p style="font-size: 0.95rem">Total de Alunos</p>
            </div>
          </div>
          <div
            class="stat-card"
            style="min-width: 140px; max-width: 160px; padding: 0.7rem 1rem"
          >
            <div class="stat-icon" style="font-size: 1.7rem">‚úÖ</div>
            <div class="stat-content">
              <h3 id="approvedStudents" style="font-size: 1.5rem">0</h3>
              <p style="font-size: 0.95rem">Aprovados</p>
            </div>
          </div>
          <div
            class="stat-card"
            style="min-width: 140px; max-width: 160px; padding: 0.7rem 1rem"
          >
            <div class="stat-icon" style="font-size: 1.7rem">‚ö†Ô∏è</div>
            <div class="stat-content">
              <h3 id="inProgressStudents" style="font-size: 1.5rem">0</h3>
              <p style="font-size: 0.95rem">Em Curso</p>
            </div>
          </div>
          <div
            class="stat-card"
            style="min-width: 140px; max-width: 160px; padding: 0.7rem 1rem"
          >
            <div class="stat-icon" style="font-size: 1.7rem">‚ùå</div>
            <div class="stat-content">
              <h3 id="failedStudents" style="font-size: 1.5rem">0</h3>
              <p style="font-size: 0.95rem">Reprovados</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Gr√°ficos -->
      <section class="charts-section">
        <div class="charts-grid">
          <!-- Gr√°fico de Cursos -->
          <div class="chart-container">
            <h3>üìö Distribui√ß√£o por Curso</h3>
            <canvas id="coursesChart"></canvas>
          </div>

          <!-- Gr√°fico de Situa√ß√£o -->
          <div class="chart-container">
            <h3>üìà Status dos Alunos</h3>
            <canvas id="statusChart"></canvas>
          </div>

          <!-- Gr√°fico de Per√≠odos -->
          <div class="chart-container">
            <h3>üïê Distribui√ß√£o por Per√≠odo</h3>
            <canvas id="periodsChart"></canvas>
          </div>

          <!-- Gr√°fico de M√©dias -->
          <div class="chart-container">
            <h3>üìä Distribui√ß√£o de M√©dias</h3>
            <canvas id="gradesChart"></canvas>
          </div>
        </div>
      </section>

      <!-- An√°lises Visuais Avan√ßadas -->
      <section class="visual-analysis-section">
        <h2>üìä An√°lises Visuais</h2>

        <div class="visual-analysis-grid">
          <!-- Distribui√ß√£o por Per√≠odo -->
          <div class="analysis-container">
            <h3>üïê Distribui√ß√£o por Per√≠odo</h3>
            <canvas id="periodDistributionChart"></canvas>
          </div>

          <!-- Taxa de Aprova√ß√£o por Curso -->
          <div class="analysis-container">
            <h3>üìà Taxa de Aprova√ß√£o por Curso</h3>
            <canvas id="approvalRateChart"></canvas>
          </div>
        </div>

        <!-- Alunos que Precisam de Aten√ß√£o -->
        <div class="attention-section">
          <h3>‚ö†Ô∏è Alunos que Precisam de Aten√ß√£o</h3>
          <div class="attention-grid" id="attentionStudentsGrid">
            <!-- Ser√° preenchido dinamicamente -->
          </div>
        </div>
      </section>

      <!-- Tabelas Detalhadas -->
      <section class="detailed-stats">
        <div class="stats-tables">
          <!-- Estat√≠sticas por Curso -->
          <div class="table-container">
            <h3>üìã Estat√≠sticas Detalhadas por Curso</h3>
            <div class="table-wrapper">
              <table id="courseStatsTable">
                <thead>
                  <tr>
                    <th>Curso</th>
                    <th>Total</th>
                    <th>Aprovados</th>
                    <th>Em Curso</th>
                    <th>Reprovados</th>
                    <th>Taxa Aprova√ß√£o</th>
                    <th>M√©dia Geral</th>
                  </tr>
                </thead>
                <tbody id="courseStatsBody"></tbody>
              </table>
            </div>
          </div>

          <!-- Top Alunos -->
          <div class="table-container">
            <h3>üèÜ Melhores Alunos (Top 10)</h3>
            <p class="table-description">
              Ranking baseado em m√©dia acad√™mica (60%) e frequ√™ncia (40%)
            </p>
            <div class="table-wrapper">
              <table id="topStudentsTable">
                <thead>
                  <tr>
                    <th>Posi√ß√£o</th>
                    <th>Nome</th>
                    <th>Curso</th>
                    <th>M√©dia</th>
                    <th>Faltas</th>
                    <th>Presen√ßa</th>
                    <th>Pontua√ß√£o</th>
                    <th>Situa√ß√£o</th>
                  </tr>
                </thead>
                <tbody id="topStudentsBody"></tbody>
              </table>
            </div>
          </div>

          <!-- Registros Recentes -->
          <div class="table-container">
            <h3>üìù Registros de Presen√ßa Recentes</h3>
            <div class="table-wrapper">
              <table id="recentAttendanceTable">
                <thead>
                  <tr>
                    <th>Data/Hora</th>
                    <th>Aluno</th>
                    <th>Curso</th>
                    <th>Status</th>
                    <th>Professor</th>
                  </tr>
                </thead>
                <tbody id="recentAttendanceBody"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
      <div class="loading-spinner"></div>
      <div class="loading-text">Carregando estat√≠sticas...</div>
      <div class="loading-subtext">Processando dados</div>
    </div>

    <script src="auth.js"></script>
    <script src="stats.js"></script>
  </body>
</html>
